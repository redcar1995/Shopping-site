{% spaceless %}
<div id="_ptg-toolbar-{{ token }}" class="_ptg-toolbar _ptg-toolbar--hidden">
    <div class="_ptg-toolbar__trigger" title="{% trans from 'admin' %}targeting{% endtrans %}">
        <span class="_ptg-toolbar__icon _ptg-toolbar__icon--target">
            {{ include('@PimcoreCore/Profiler/target.svg.twig') }}
        </span>

        <a class="_ptg-toolbar__icon _ptg-toolbar__icon--close" data-selector="#_ptg-toolbar-{{ token }}" title="Close Toolbar">
            {{ include('@PimcoreCore/Targeting/toolbar/icon/close.svg.twig') }}
        </a>
    </div>

    <div class="_ptg-toolbar__content">
        <div class="_ptg-toolbar__content-inner">
            <table class="_ptg-toolbar__table">
                {% if documentTargetGroup is not null %}
                    <tr>
                        <th>Document Target Group</th>
                        <td class="_ptg-toolbar__table__col-right">
                            <span class="_ptg-toolbar__label _ptg-toolbar__label--target-group">{{ documentTargetGroup.name }}</span>
                        </td>
                    </tr>
                {% endif %}

                <tr>
                    <th>Matched Rules</th>
                    <td class="_ptg-toolbar__table__col-number">
                        <span class="_ptg-toolbar__label">{{ rules|length }}</span>
                    </td>
                </tr>

                <tr>
                    <th>Assigned Target Groups</th>
                    <td class="_ptg-toolbar__table__col-number">
                        <span class="_ptg-toolbar__label">{{ targetGroups|length }}</span>
                    </td>
                </tr>
            </table>

            {% if rules is not empty %}
                <h2>Matched Rules</h2>
                <ul class="_ptg-toolbar__list">
                    {% for rule in rules %}
                        <li>
                            <span class="_ptg-toolbar__label _ptg-toolbar__label--rule">{{ rule.name }}</span>
                        </li>
                    {% endfor %}
                </ul>
            {% endif %}

            {% if targetGroups is not empty %}
                <h2>Assigned Target Groups</h2>

                <table class="_ptg-toolbar__table">
                    {% for targetGroup in targetGroups %}
                        <tr>
                            <td>
                                <span class="_ptg-toolbar__label _ptg-toolbar__label--target-group">{{ targetGroup.name }}</span>
                            </td>
                            <td class="_ptg-toolbar__table__col-number">
                                <span class="_ptg-toolbar__label" title="Threshold: {{ targetGroup.threshold }}">{{ targetGroup.count }}</span>
                            </td>
                        </tr>
                    {% endfor %}
                </table>
            {% endif %}

            {% if documentTargetGroups is not empty %}
                <h2>Document Target Groups</h2>

                <table class="_ptg-toolbar__table">
                    {% for assignment in documentTargetGroups %}
                        <tr>
                            <td>
                                <span class="_ptg-toolbar__label">{{ assignment.document.path }}</span>
                            </td>
                            <td class="_ptg-toolbar__table__col-right">
                                <span class="_ptg-toolbar__label _ptg-toolbar__label--target-group">{{ assignment.targetGroup.name }}</span>
                            </td>
                        </tr>
                    {% endfor %}
                </table>
            {% endif %}
        </div>
    </div>
</div>
{% endspaceless %}
<style type="text/css">
    {{ include('@PimcoreCore/Targeting/toolbar/toolbar.css') }}
</style>
{{ include('@PimcoreCore/Targeting/toolbar/toolbar_js.html.twig') }}
