
name: "POEditor translations export"

on:
    workflow_dispatch:
        inputs:
            languages:
                description: 'Language-Codes (csv, eg. zh-CN)'
                required: false
                default: ''


jobs:
    poeditor:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v2
              with:
                  ref: ${{ github.head_ref }}

            - name: "Install PHP"
              uses: "shivammathur/setup-php@v2"

            - name: POEditor
              env:
                  POEDITOR_TOKEN: ${{ secrets.POEDITOR_TOKEN }}
              run: |
                  php .github/ci/scripts/poeditor.php

            - uses: stefanzweifel/git-auto-commit-action@v4
              with:
                  commit_message: Update POEditor translations